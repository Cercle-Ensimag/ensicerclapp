<app-loading [loading]="!loading"></app-loading>

<div class="tab-group-container">
	<mat-tab-group>

	  <mat-tab *ngIf="cal.getPersosEvents() | async as events; else loading" label="Personnels">
			<div class="tab-content-container">
				<app-paged-grid [list]="events" emptyMessage="Aucun événement personnel" #pagesPerso>
					<div *ngFor="let event of pagesPerso.truncatedList()" class="wrapper">
			      <mat-card class="center">
			        {{ event.title }}<br>
			        <label *ngIf="event.isSingleDay()">
								{{ event.start | date:d.l.shortDateTimeFormat:'':d.l.locale }} à {{ event.end | date:d.l.timeFormat:'':d.l.locale }}
			        </label>
			        <label *ngIf="!event.isSingleDay()">
			          {{ event.start | date:d.l.shortDateTimeFormat:'':d.l.locale }} <br>à<br> {{ event.end | date:d.l.shortDateTimeFormat:'':d.l.locale }}
			        </label>
			        <br>
			        {{ event.location }}<br>
			        <button mat-icon-button (click)="openCreateEvent(event.id)"><mat-icon>edit</mat-icon></button>
			        <button mat-icon-button (click)="removePersoEvent(event)"><mat-icon>delete</mat-icon></button>
						</mat-card>
					</div>
				</app-paged-grid>
			</div>
	  </mat-tab>

	  <mat-tab *ngIf="cal.getAssosEventsITakePart() | async as events; else loading"  label="Associatifs">
			<div class="tab-content-container">
				<div *ngIf="cal.getEventIdsWithNoEvents() | async as ids;">
					<mat-card *ngIf="ids.length > 0" class="item center">
						<div class="error">
							{{ d.format(d.l.nbOfSubscriptionsToDeletedEvents, ids.length) }}<br><br>
							<button mat-raised-button (click)="cal.removeEventsFromCalendar(ids)">{{ d.l.deleteEventSubsciptionsButtonLabel }}</button>
						</div>
					</mat-card>
				</div>
				<app-paged-grid [list]="events" emptyMessage="Aucun événement associatif" #pagesAssos>
					<div *ngFor="let event of pagesAssos.truncatedList()" class="wrapper">
						<mat-card class="center">
							{{ event.title }}<br>
							<label *ngIf="event.isSingleDay()">
								{{ event.start | date:d.l.shortDateTimeFormat:'':d.l.locale }} à {{ event.end | date:d.l.timeFormat:'':d.l.locale }}
							</label>
							<label *ngIf="!event.isSingleDay()">
								{{ event.start | date:d.l.shortDateTimeFormat:'':d.l.locale }} <br>à<br> {{ event.end | date:d.l.shortDateTimeFormat:'':d.l.locale }}
							</label>
							<br>
							{{ event.location }}<br>
							<button mat-icon-button routerLink="/events/event/{{ event.id }}"><mat-icon>search</mat-icon></button>
						</mat-card>
					</div>
				</app-paged-grid>
			</div>
	  </mat-tab>

	</mat-tab-group>
</div>

<div class="mat-fab-bottom-right">
  <button mat-fab color="primary" (click)="location.back()"><mat-icon>arrow_back</mat-icon></button>
</div>

<div class="fab-btn-placeholder"></div>
