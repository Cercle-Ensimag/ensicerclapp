<mat-card *ngIf="poll">
  <form [formGroup]="pollCtrl" class="container">

    <span *ngIf="message" class="error">{{ message }}</span>

    <mat-form-field>
      <input matInput placeholder="{{ d.l.pollTitleLabel }}" formControlName="title">
      <mat-error *ngIf="pollCtrl.get('title').invalid">{{ d.l.pollTitleTooShortError }}</mat-error>
    </mat-form-field>

    <mat-form-field>
      <textarea matInput placeholder="{{ d.l.pollDescriptionLabel }}" formControlName="description"></textarea>
      <mat-error *ngIf="pollCtrl.get('description').invalid">{{ d.l.pollDescriptionError }}</mat-error>
    </mat-form-field>

    <div class="grid-container">
      <div *ngFor="let choice of newChoices">
        <div class="wraper border">
          <form [formGroup]="choice.ctrl" class="container">
            <mat-form-field>
              <input matInput placeholder="{{ d.l.choiceLabelLabel }}" formControlName="label">
              <mat-error *ngIf="choice.ctrl.get('label').invalid"></mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="{{ d.l.choiceImageLabel }}" formControlName="image">
              <mat-error *ngIf="choice.ctrl.get('image').invalid"></mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="{{ d.l.choiceShortLabelLabel }}" formControlName="short">
              <mat-error *ngIf="choice.ctrl.get('short').invalid"></mat-error>
            </mat-form-field>
            <mat-icon (click)="removeChoice(choice.id)">delete</mat-icon>
          </form>
        </div>
      </div>
    </div>

    <button mat-raised-button (click)="addChoice()" [disabled]="!choicesOk()" color="primary">{{ d.l.addChoiceLabel }}</button>
    <button mat-raised-button (click)="onSubmit()" color="primary" [disabled]="!choicesOk() || pollCtrl.invalid">{{ d.l.applyChangesLabel }}</button>
    <button mat-raised-button (click)="back()">{{ d.l.backLabel }}</button>
  </form>
</mat-card>
