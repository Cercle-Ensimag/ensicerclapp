<div *ngIf="!noPollAvailaible()">
  <mat-card *ngIf="polls">
    <span *ngIf="error" class="error">{{ error }}</span>

    <!-- <h3 *ngIf="users">{{ d.format(d.l.nbVoteUsersLabel, users.length) }}</h3> -->
    <mat-form-field [class.large]="!media.mobileSize">
      <input matInput placeholder="{{ d.l.markAsVotedInfo }}" [formControl]="emailCtrl">
      <button mat-icon-button matSuffix><mat-icon>search</mat-icon></button>
    </mat-form-field>
    <button mat-raised-button
      (click)="markAsVoted()"
      [disabled]="emailCtrl.invalid || displayedUsers.length != 0 || noPollSelected()"
      color="primary"
    >{{ d.l.votedButtonLabel }}</button>
  </mat-card>

  <mat-expansion-panel *ngIf="polls" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>{{ d.l.pollChoiceLabel }}</mat-panel-title>
    </mat-expansion-panel-header>

    <mat-nav-list style="text-align=right">
      <div *ngFor="let poll of polls">
        <a mat-list-item *ngIf="poll.started">
          <mat-checkbox (change)="change(poll.id, $event.checked)" color="primary">{{ poll.title }}</mat-checkbox>
        </a>
      </div>
    </mat-nav-list>
  </mat-expansion-panel>

  <mat-card *ngIf="displayedUsers.length != 0">
    <mat-nav-list>
      <a mat-list-item *ngFor="let user of displayedUsers | slice:pageIndex*pageSize:(pageIndex+1)*pageSize" [innerHTML]="user"></a>
    </mat-nav-list>
  </mat-card>
  <mat-paginator [length]="displayedUsers.length"
                [pageSize]="pageSize"
                (page)="updateList($event)">
  </mat-paginator>
</div>

<mat-card *ngIf="noPollAvailaible()">
  <h3>{{ d.l.noPoll }}</h3>
</mat-card>
