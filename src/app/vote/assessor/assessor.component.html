<div *ngIf="!noPollAvailaible()">
  <mat-card *ngIf="polls">
    <form [formGroup]="searchCtrl">

      <span *ngIf="error" class="error">{{ error }}</span>

      <span>
        <mat-form-field [class.large]="!media.mobileSize">
          <input matInput placeholder="{{ d.l.markAsVotedEmailInfo }}" formControlName="email">
        </mat-form-field>

        <mat-form-field class="domain">
          <mat-select placeholder="{{ d.l.markAsVotedDomainInfo }}" formControlName="domain">
            <mat-option *ngFor="let dom of domains" [value]="dom">{{ dom }}</mat-option>
          </mat-select>
        </mat-form-field>

        <button mat-raised-button
          type="submit"
          (click)="markAsVoted()"
          [disabled]="searchCtrl.invalid || displayedUsers.length != 0 || noPollSelected()"
          color="primary"
        >{{ d.l.votedButtonLabel }}</button>
      </span>
    </form>
  </mat-card>

  <mat-expansion-panel *ngIf="polls" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>{{ d.l.pollChoiceLabel }}</mat-panel-title>
    </mat-expansion-panel-header>

    <mat-nav-list style="text-align=right">
      <div *ngFor="let poll of polls">
        <a mat-list-item *ngIf="poll.started">
          <mat-checkbox (change)="change(poll.id, $event.checked)" color="primary">{{ poll.title }}</mat-checkbox>
        </a>
      </div>
    </mat-nav-list>
  </mat-expansion-panel>

  <mat-card *ngIf="displayedUsers.length != 0">
    <mat-nav-list>
      <a mat-list-item *ngFor="let user of displayedUsers | slice:pageIndex*pageSize:(pageIndex+1)*pageSize" [innerHTML]="user"></a>
    </mat-nav-list>
  </mat-card>
  <mat-paginator [length]="displayedUsers.length"
                [pageSize]="pageSize"
                (page)="updateList($event)">
  </mat-paginator>
</div>

<mat-card *ngIf="noPollAvailaible()">
  <h3>{{ d.l.noPoll }}</h3>
</mat-card>
