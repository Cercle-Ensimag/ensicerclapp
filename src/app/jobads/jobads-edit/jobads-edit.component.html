<!-- Loading -->
<app-loading [loading]="formGroup"></app-loading>

<div class="thin-container">
	<!-- JobAd display -->
	<mat-card *ngIf="formGroup">
		<form [formGroup]="formGroup" class="container">

			<mat-form-field>
				<input matInput placeholder="{{ d.l.jobadTitleLabel }}" formControlName="title" autocomplete="off">
				<mat-error *ngIf="formGroup.get('title').invalid">{{ d.l.jobadTitleError }}</mat-error>
			</mat-form-field>

			<mat-form-field>
				<textarea matInput placeholder="{{ d.l.jobadDescriptionLabel }}" formControlName="description"></textarea>
				<mat-error *ngIf="formGroup.get('description').invalid">{{ d.l.jobadDescriptionError }}</mat-error>
			</mat-form-field>

			<markdown [data]="formGroup.get('description').value"></markdown>

			<mat-form-field>
				<mat-select placeholder="{{ d.l.jobadTypeLabel }}" formControlName="type">
					<mat-option *ngFor="let i of [0, 1, 2]" [value]="i">{{ d.l['jobadType' + i] }}</mat-option>
				</mat-select>
				<mat-error *ngIf="formGroup.get('type').invalid">{{ d.l.jobadTypeError }}</mat-error>
			</mat-form-field>

			<mat-form-field style="max-width: 200px">
				<input matInput [matDatepicker]="picker1" placeholder="{{ d.l.jobadStartLabel }}" formControlName="start" autocomplete="off">
				<mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
				<mat-datepicker #picker1></mat-datepicker>
				<mat-error *ngIf="formGroup.get('start').invalid">{{ d.l.jobadStartError }}</mat-error>
			</mat-form-field>

			<mat-form-field>
				<input matInput placeholder="{{ d.l.jobadLengthLabel }}" formControlName="length" autocomplete="off">
				<mat-error *ngIf="formGroup.get('length').invalid">{{ d.l.jobadLengthError }}</mat-error>
			</mat-form-field>

			<mat-form-field>
				<input matInput placeholder="{{ d.l.jobadTechnologiesLabel }}" formControlName="technologies" autocomplete="off">
				<mat-error *ngIf="formGroup.get('technologies').invalid">{{ d.l.jobadTechnologiesError }}</mat-error>
			</mat-form-field>

			<mat-form-field>
				<input matInput placeholder="{{ d.l.jobadContactLabel }}" formControlName="contact" autocomplete="off">
				<mat-error *ngIf="formGroup.get('contact').invalid">{{ d.l.jobadContactError }}</mat-error>
			</mat-form-field>

			<mat-form-field>
				<input matInput placeholder="{{ d.l.jobadAuthorLabel }}" formControlName="author" autocomplete="off">
				<mat-error *ngIf="formGroup.get('author').invalid">{{ d.l.jobadAuthorError }}</mat-error>
			</mat-form-field>

			<mat-slide-toggle formControlName="done" color="primary">
				<span *ngIf="!formGroup.get('done').value">{{ d.l.jobadOngoing }}</span>
				<span *ngIf="formGroup.get('done').value">{{ d.l.jobadDone }}</span>
			</mat-slide-toggle>
		</form>
	</mat-card>
</div>

<div class="mat-fab-bottom-right">
	<button mat-fab color="primary" (click)="location.back()"><mat-icon>arrow_back</mat-icon></button>
	<button *ngIf="formGroup" mat-fab color="primary"
					(click)="submit()"
					[disabled]="formGroup.invalid || formGroup.pristine">
		<mat-icon>save</mat-icon>
	</button>
</div>

<div class="fab-btn-placeholder"></div>
